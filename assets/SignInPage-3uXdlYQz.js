import{b as I,k as f,j as e,G as S,w as k,_ as u,r as p,N as y,x as T}from"./index-BGnab7fH.js";import{A as G}from"./AdvantagesSection-CzIHBfV8.js";import{c as L,b as v,u as F,I as P,o as E}from"./index.esm-wTxir8Ok.js";import{u as W,L as A,a as B}from"./LocalizationSwitcher-BLd-MNW3.js";const $="_signinWrapper_1kn1t_1",H="_mainText_1kn1t_7",R="_labelText_1kn1t_17",D="_formGroup_1kn1t_26",q="_inputField_1kn1t_33",M="_error_1kn1t_47",O="_submitBtn_1kn1t_58",V="_dontHaveAcc_1kn1t_79",C="_navigate_1kn1t_88",z="_eyeIcon_1kn1t_95",s={signinWrapper:$,mainText:H,labelText:R,formGroup:D,inputField:q,error:M,submitBtn:O,dontHaveAcc:V,navigate:C,eyeIcon:z},U="_div_zjlgp_1",J={div:U};var K={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Q=()=>{const i=I(),c=f(),l=async a=>{const m=a.credential;try{const o=await i(k({token:m})).unwrap();c("/host"),o()}catch(o){console.error("Invalid Google login:",o),u.error(`Invalid Google login: ${o}`)}},d=a=>{console.error("Invalid Google login:",a)};return e.jsx("div",{className:J.GoogleButtonLogin,children:e.jsx(S,{clientId:K.VITE_GOOGLE_CLIENT_ID,buttonText:"Login with Google",onSuccess:l,onFailure:d})})},X=L().shape({email:v().email("Must be a valid email!").required("Required"),password:v().min(6,"Too short!").required("Required")}),Y=()=>{const i=p.useId(),c=p.useId(),l=I(),d=f(),[a,m]=p.useState(!1),o=()=>{m(t=>!t)},{register:_,handleSubmit:j,formState:{errors:r}}=F({mode:"onChange",defaultValues:{email:"",password:""},resolver:E(X)}),b=async t=>{try{const{email:h,password:N}=t,x=await l(T({email:h,password:N}));x.error&&u.error(x.payload.response.data.message||"Login failed")}catch{u.error("Something went wrong")}},{t:n}=W(),w=t=>{localStorage.setItem("accessToken",t.accessToken),localStorage.setItem("refreshToken",t.refreshToken),d("/host")};return e.jsxs(e.Fragment,{children:[e.jsx(A,{}),e.jsx(B,{}),e.jsxs("div",{className:s.signinWrapper,children:[e.jsx("p",{className:s.mainText,children:n("description.signIn.MainHeader")}),e.jsxs("form",{className:s.form,onSubmit:j(b),children:[e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{htmlFor:i,className:s.labelText,children:n("description.signIn.EmailLabel")}),e.jsx("input",{id:i,..._("email"),type:"email",placeholder:n("description.signIn.EmailPlaceholder"),className:`${s.inputField} ${r.email?"loginError":""}`}),r.email&&e.jsx("div",{className:s.error,children:r.email.message})]}),e.jsxs("div",{className:s.formGroup,children:[e.jsx("label",{htmlFor:c,className:s.labelText,children:n("description.signIn.PwdLabel")}),e.jsx("input",{id:c,..._("password"),type:a?"text":"password",placeholder:n("description.signIn.PwdPlaceholder"),className:`${s.inputField} ${r.password?"loginError":""}`}),e.jsx(P,{width:20,height:20,iconName:a?"eye-on":"eye-off",styles:s.eyeIcon,onClick:o}),r.password&&e.jsx("div",{className:s.error,children:r.password.message})]}),e.jsx("button",{type:"submit",className:s.submitBtn,children:n("description.signIn.MainButton")})]}),e.jsxs("p",{className:s.dontHaveAcc,children:[n("description.signIn.AllreadyHaveAcc"),e.jsx(y,{to:"/signup",className:s.navigate,children:n("description.signIn.SignInLink")})]}),e.jsx(Q,{onSuccess:w})]})]})},Z="_signInPageWrapper_1t6af_1",ee="_formWrapper_1t6af_7",se="_disabled_1t6af_16",g={signInPageWrapper:Z,formWrapper:ee,disabled:se},te=()=>e.jsxs("div",{className:g.signInPageWrapper,children:[e.jsx("div",{className:g.formWrapper,children:e.jsx(Y,{})}),e.jsx("div",{className:g.disabled,children:e.jsx(G,{})})]});export{te as default};
